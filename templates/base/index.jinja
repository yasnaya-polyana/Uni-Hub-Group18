<!DOCTYPE html>
<html lang="en" data-theme="winter">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>UniHub - {% block title %}{% endblock %}</title>
		<link
			href="https://cdn.jsdelivr.net/npm/daisyui@3.7.3/dist/full.css"
			rel="stylesheet"
			type="text/css"
			/>
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons"
			rel="stylesheet"
			/>
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
			rel="stylesheet"
			/>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script>
			// Apply theme immediately to prevent flash of wrong theme
			(function() {
			  // Get saved theme from localStorage or use default
			  const savedTheme = localStorage.getItem('theme') || 'light';
			  
			  // Apply theme to html element immediately
			  document.documentElement.setAttribute('data-theme', savedTheme);
			})();
		</script>
		<!-- Markdown Editor -->
		<link
			href="{{ static('simplemde/simplemde.css') }}"
			rel="stylesheet"
			/>
		<script src="{{ static('simplemde/simplemde.min.js') }}"></script>
	</head>
	<body class="min-h-screen flex flex-col">
		{% include 'base/nav.jinja' %}
		{% if messages %}
		{% for message in messages %}
		<div class="alert alert-{{ message.tags }} top-0 w-full z-70 mb-4 z-auto" style="border-radius: 0px;">
			{{ message }}
		</div>
		{% endfor %}
		{% endif %}
		{% block heading %}{% endblock %}
		<main class="container mx-auto px-4 py-8 flex-grow">
			{% block content %}{% endblock %}
		</main>
		<footer class="footer sm:footer-horizontal footer-center bg-base-300 text-base-content p-4">Â© 2025 UniHub. All rights reserved.</footer>
	</body>
	<script>
		document.addEventListener('DOMContentLoaded', function() {
		  // Get the toggle element
		  const themeToggle = document.getElementById('theme-toggle');
		  
		  if (themeToggle) {
		    // Get saved theme from localStorage or use default
		    const savedTheme = localStorage.getItem('theme') || 'dark';
		    
		    // Set the toggle state based on the saved theme
		    themeToggle.checked = savedTheme === 'dark';
		    
		    // Add event listener for toggle changes
		    themeToggle.addEventListener('change', function() {
		      const newTheme = this.checked ? 'dark' : 'light';
		      document.documentElement.setAttribute('data-theme', newTheme);
		      localStorage.setItem('theme', newTheme);
		      console.log('Theme changed to:', newTheme);
		    });
		  }
		});
	</script>
	{% include "base/logic.jinja" %}
</html>